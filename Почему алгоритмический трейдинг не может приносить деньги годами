Почему алгоритмический трейдинг не может приносить деньги годами

Мимо меня в бумажном, электронном, вербальном и разве что не тактильном виде пролетают, проносятся, проплывают, протаскиваются и проковыливают туда-сюда многочисленные предложения дать денег на алгоритмическую торговлю (чем угодно – акциями, валютой, нефтью, деривативами и пр.). Предложения разные – безграмотные и очень аккуратные, с указанием подтвержденной успешной истории и без таковой, для ритейла и для крупных клиентов. В обратную сторону мимо меня летят мнения инвесторов – от «как это круто» до «опять мошенники спамят». Я по роду службы хорошо осведомлен вообще о управлении инвестициями и в частности о алгоритмических стратегиях – может быть пора мне высказаться по поводу гомеопатии, астрологии, алгоритмов инвестирования.

Рынок инвестиций огромен и игроков на нем очень много – просто как в живой природе. Относительно реальных стоимостей инвестирование – это игра с очень небольшой положительной суммой (формируемой перетоком части доходов из реального бизнеса на рынки в виде платы за предоставляемый рынками капитал), в которой участники перераспределяют в основном то, что принесли на рынок, между собой, не забывая платить дань банкам, брокерам, юристам, налоговым органам, мошенникам и пр. То есть, в переводе на butthead language, подавляющее большинство игроков просто отдает свои капиталы более умелым и приспособленным, или – жуликам. Десятилетия опыта и миллиарды долларов конечно дали множеству игроков возможность приспособиться к рыночной среде и приспособить рынки – так же, как в живой природе одни вырастили зубы, другие – когти, третьи стали очень быстрыми, четвертые – очень большими, остальные - умерли. Кто эти выжившие чемпионы? Это инсайдеры. Это – крупные посредники, глобальные игроки, которые способны видеть потоки и опережать их своими действиями. Это пиратские команды, состоящие из профессионалов высочайшего класса, с опытом в десятки лет и железными нервами, которые даже не видят – чувствуют качество той или иной инвестиции, просто потому что уже не раз наблюдали что-то подобное на рынке. Это монстры, способные вложить больше других, провести анализ на месте силами десятков аналитиков и экспертов, договориться с теми, кто определяет политику, организовать рыночные манипуляции, заставив толпу пойти в нужную сторону. Наконец это те, кто сумел построить технологии, гарантирующие им опережение остальных игроков – мощнейшие сервера, уникальные процессоры, программы, замечающие арбитражные возможности раньше всех и раньше всех реагирующие на них. Эти «технологии» стоят сотни миллионов долларов просто потому, что они постоянно становятся быстрее – в этом деле первый получает все, второй – убытки. И тем не менее, даже все эти чемпионы устойчиво зарабатывают не впечатляющие обывателя цифры. Лучшие (если мерять на скажем 10-тилетнем горизонте) показывают 11-12% годовых. Нормальные, осторожные и умные – 7-8% годовых, зато значительно стабильнее. Вполне хорошо если инвестор получает и 4-5% годовых – он все равно выигрывает у рынка и у инфляции с запасом. О, да, есть конечно получающие любые доходы, хоть 1000%, хоть 1000000%. Это те, кто выиграл джек пот, случайно попал в яблочко. Один раз. Два раза – не исключено теорией вероятности, но в природе не встречалось. А если говорить все же о устойчивых показателях, то показывающих 15% годовых на вменяемом горизонте (те же 10 лет) – просто не существует - за редким исключением тех, кто (а) получил случайную сверхприбыль 1 раз и с тех пор ее еще не проел (ну, скажем, взял Apple с плечом в нужный момент), или (б) достаточно тупо стоял в позиции, а эта позиция росла (например если в 2008 осенью взял РТС и дожил до конца 2013го). Ни в том, ни в другом случае нет ни искусства ни технологии – есть везение.

Что же такое алгоритмическая торговля, если она не основана на стоящих сотни миллионов долларов технологиях? Особенно – если она к тому же приносит или обещает приносить пресловутые «5% в месяц»? Мошенничество? Иногда. Но не всегда. Иногда же это просто “survivorship bias”. Собираются ребята, изучившие курс математики технического вуза и поторговавшие на свои 5 тыс долл. акциями в БКС. И решают запилить алготрейдинг. Кто-то верит в свою гениальность от недостатка знаний; кто-то в силу нормальной для затянувшегося детства самоуверенности; кому-то повезло во время торговли в БКС и он поверил в свою звезду. Пишут они роботов медленных (оборудования нет, каналы обычные), настроенных на простые алгоритмы (а откуда им взять сложные при их подготовке и опыте) – в основном торгуют на расхождениях пар с устойчивой ковариацией, факторном распознавании трендов, поиске простых образов и пр. Групп таких ребят собираются в год сотни, благо вузы штампуют технарей и экономистов, применения им мало, а программировать сегодня в России может почти каждый неглупый подросток из крупного города 25-ти лет от роду, да и брокеров, готовых их подсоединить к своей платформе, много и в России и в мире – казино всегда прибыльный бизнес.

Их торговые стратегии в сущности – белый шум, с небольшой долей длинных позиций относительно рынка, и соусом из краткосрочных паттернов, которые они верно находят с помощью регрессионного анализа (только вот паттерны эти «уползают» на глазах). Но по закону больших чисел результаты у них будут распределены достаточно случайно, половина в плюс, половина в минус. В первый год половина получит убытки сходу и по большей части «сольется» с рынка. Тридцать процентов получит маленькую прибыль и решит, что они на верном пути, и будет искать новых алгоритмов. Процентов двадцать получат приличную прибыль и уверует в свою гениальность. На следующий год соотношение будет тем же – в итоге через 2 года останется 4% тех, кто два года получал огромную прибыль, 6% тех, кто получил огромную прибыль в первый год и небольшую во второй, 6% тех, кто получил небольшую прибыль в первый год и огромную во второй, и наконец 9% тех, кто получил в оба года небольшую прибыль. После третьего года у нас все равно еще будет примерно 2% тех, кто либо все три года получал очень высокую прибыль, либо получил небольшую прибыль в первый год и очень высокую во второй и третий. Эти будут ходить с нимбами и продавать себя направо и налево совершенно искренне. Если в первый год в игру вступило 300 команд, то таких великих через три года будет ни много ни мало 6 команд. К ним добавится еще примерно 15 команд с более скромными, но тоже хорошими результатами, они тоже будут себя продавать. Если считать, что 10% вступивших в игру – мошенники, то поверх этой 21 группы искренне заблуждающихся у нас будет еще 30 групп, фальсифицирующих свои результаты и утверждающих, что у них все отлично, и тоже собирающих деньги. Итого каждый год добавляет нам условно 51 группу алгоритмических трейдеров, которые продают клиентам свои услуги. Обращаю внимание – более 40% из «успешных» действительно верят в свой успех.

Что случится с этими группами еще год спустя (то есть – что случится с вашими деньгами, если вы дали их какой-то из этих групп)? Половина из честных и все мошенники получит вам убытки – ваш шанс заработать с командой, продающей вам свой трехлетний успешный опыт - примерно 20% (всего их, напомню, 51, прибыль вам принесет лишь половина из 21 команды не мошенников). Ваш шанс заработать большие деньги – примерно 8% (20% от 21 команды из общего числа предлагающих в 51). Ваш шанс заработать большие деньги 2 года подряд – уже меньше 2%. Ваш шанс зарабатывать 10 лет подряд с такими ребятами – примерно 1/1024 если говорить о каких бы то ни было доходах и 1/10000000 если речь идет о крупных доходах каждый год.

А внутри экосистемы алготрейдеров идет сложная жизнь, которая делает ваши шансы еще ниже. В частности, происходит конвертация части «гениев» в мошенники по факту получения ими первых убытков. Примириться с убытками они не могут, и потому еще долго продают «результаты за избранный период» или «среднее по трем годам», например +60%, +80% и -90% становятся у них не 1,6*1,8*0,1 = 0,29 (то есть 71% убытка), а (0,6+0,8-0,9)/3 = 16,7% годовых, которые они выдают за свой устойчивый результат. Мошенники же тоже совершенствуются: помимо простой выборки периода, фейковых отчетов и искусственных сделок для изменения результата, они например заводят два счета с противоположными стратегиями, и показывают официальный отчет по тому счету, который в этом году зарабатывает. Управляющие жаждут высоких комиссий и достаточно спокойно переживают быстрый уход клиента, потерявшего деньги – за время инвестирования он все равно заплатил, а на его место придет другой любитель даровых сверхдоходов. Использующие же два противоположных продукта одновременно вообще просто делят свои активы в уме на два – одна половина приносит огромные комиссии и генерирует новых клиентов, вторая половина просто сливает клиентов; в следующем периоде они меняются местами.

Возникает вопрос – можно ли заработать, передав деньги такой команде? Ответ – да. Можно и не один год зарабатывать. Из 1024 команд 1 команда должна 10 лет подряд генерировать прибыль. Если «ваши ребята» 10 лет подряд приносят вам прибыль – значит где-то рядом минимум 1023 инвестора потеряли деньги. Какова вероятность заработать на 11 год? 50%.

Возникает еще вопрос – неужели нельзя предположить, что вдруг в московской (питерской, нижегородской) квартире найдется гений, который построит такой алгоритм, ну просто растакой алгоритм, что он именно что будет зарабатывать большие деньги на рынках, и все его клиенты будут счастливы, а все не клиенты – несчастны? Ответ – нельзя, и вот почему:

Во-первых, рынки представляют из себя по большому счету случайные процессы, в которых детерминированная составляющая (а) невелика, (б) тщательнейшим образом изучается тысячами мощных игроков. Каким бы ни был алгоритм, против случайного процесса не попрешь, именно поэтому все настоящие «алгоритмики» не предсказывают будущее, а ловят микроскопические расхождения – между индексом и корзиной, которая его составляет, между стоимостью на разных площадках, между активом и комбинацией деривативов, которая воссоздает профиль дохода от актива. Эти расхождения рождаются и умирают в течение наносекунд – потому что их ждут и ловят, как только они появляются, сотни крупных игроков. Нет у тебя мегаэкипировки – отдыхай, все арбитражные возможности заберут за несколько наносекунд до того, как ты проснешься.

Но вдруг мы ошиблись – и на рынках где-то все же прячется закономерность? Тут наступает «во-вторых». Какова вероятность что сотни (тысячи!!!) многочисленных команд с нобелевскими лауреатами в составе, обремененные дорогущим оборудованием и десятками лет индивидуального опыта, не открыли такую закономерность, а гений ее открыл? Какие ресурсы есть у этого гения? Где и как берет он временные ряды данных, которые стоят сотни тысяч долларов в приобретении и поддержании? На каком компьютере он их обсчитывает? – для минимального разумного обсчета нужны мейнфреймы. Я не хочу сказать, что вероятность этого ровно ноль, хотя количество открытий в современной науке, сделанных на коленке – именно ровно ноль. Но даже если она равна одной тысячной, а вероятность заработать при случайном инвестировании – 50%, то я не могу отличить 50% от 50,1% - если хотите верить в гения, считайте что вероятность позитивного исхода инвестирования в продукт местных алготрейдеров 50,1%. Ой, не забудьте что они возьмут 2% за управление и 20% за доход, а комиссии брокера составят еще от 0,5 до 3%. Выгоднее (статистически) кидать дартс в экран системы Блумберг.

Ну и «в третьих». Вдруг закономерность все же нашлась и она работает. Что произойдет, если начать ее применять? На рынке, прямо на биржах, сидят роботы-анализаторы стратегий, занимающиеся выявлением видимых паттернов. Их уже много и будет еще больше. Удачную стратегию тут же поймают, соберут по ней достаточно данных, расшифруют и скопируют, и наконец – применят крупные игроки, которые занимаются выращиванием и селекцией стратегий. Они будут быстрее, и съедят вашу прибыль с момента расшифровки под ноль. Более того – их действия поменяют рынок, закономерность перестанет работать – на рынке, как и в квантовом мире, наблюдать уже значит изменять, а уж инвестировать – значит изменять все.

Откуда же берутся счастливые инвесторы, успешные локальные алгоменеджеры, адепты и апологеты, сотни постов и статей, прославляющих удачные алгоритмы? Оттуда же, откуда берутся дорогие гомеопаты, хиропрактики, тибетские медицинские практики и даже народные приметы. Их отец – человеческая психология (способность запоминать только то, что соответствует желаниям, способность принимать случайность за закономерность, готовность верить логичным доводам, даже если они оперируют на абсурдной базе, склонность игнорировать факты, идущие в разрез с нашими желаниями и пр.). Их мать – человеческая алчность: если вам свойственно заблуждаться, будьте спокойны – найдется немало тех, кто на этом заработает. Их няня – асимметричность доходов управляющих: зарабатываете вы или теряете – управляющий всегда в плюсе.

Была такая история – про грузинского акушера-гинеколога, который изобрел специальный метод обеспечения желаемого пола у будущего ребенка. Он был таким честным, что брал с родителей деньги только в случае, если пол ребенка совпадал с пожеланием. Не представляете, сколько родителей были ему благодарны! К чему это я? Да так, вспомнилось…

https://roem.ru/18-01-2017/240817/algotrade/
https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.facebook.com%2Fandrei.movchan%2Fposts%2F1446607812062091&display=popup&ref=plugin&src=post
